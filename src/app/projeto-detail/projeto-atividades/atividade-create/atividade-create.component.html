<div class="main-div">

  <mat-card class="mat-card-atividade">
    <mat-card-content>
      <mat-card-title style="opacity: 0.87 !important;"> Nova Atividade</mat-card-title>
      <mat-divider></mat-divider>

      <form [formGroup]="atividadeForm">

        <mat-input-container class="full-width-input">
          <input matInput placeholder="Título" type="text" formControlName="nome" required>
          <mat-error *ngIf="isFieldInvalid('nome')">
            Informe um título para o projeto
          </mat-error>
        </mat-input-container>

        <mat-input-container class="full-width-input">
          <mat-chip-list #chipList>
            <mat-chip *ngFor="let tag of chips"
                      (remove)="remove(tag)"
                      color="primary">
              {{tag.funcNome}}
              <mat-icon matChipRemove>cancel</mat-icon>
            </mat-chip>
            <input [matChipInputFor]="chipList" placeholder="Membros"
                   [formControl]="projFuncId"
                   [matChipInputAddOnBlur]="true"
                   [matAutocomplete]="autocompleteMembros"
                   #chipInput>
          </mat-chip-list>
          <mat-autocomplete #autocompleteMembros="matAutocomplete"
                            [displayWith]="displayFuncionario"
                            (optionSelected)="addFuncionario($event)">
            <mat-option *ngFor="let funcionario of funcionarios"
                        [value]="funcionario"
                        class="options">
              <span>{{ funcionario?.funcNome }}</span>
            </mat-option>
          </mat-autocomplete>
        </mat-input-container>

        <table class="full-width-input" cellspacing="0">
          <tr>
            <td>
              <mat-input-container class="full-width-input">
                <input matInput [matDatepicker]="picker" [min]="projeto?.projDataInicial" [max]="projeto?.projDataFinal"
                       placeholder="Prazo" formControlName="data_inicial" required
                       readonly="true" (focus)="picker.open()" (click)="picker.open()"
                       (dateChange)="validaPrazo($event)">
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
                <mat-error *ngIf="this.atividadeForm.get('data_inicial').hasError('required')">Informe o prazo
                </mat-error>
              </mat-input-container>
            </td>
            <td>
              <div class="space">
              </div>
            </td>
            <td>
              <mat-input-container class="full-width-input">
                <input matInput [matDatepicker]="picker2" [min]="minDateInicial" [max]="projeto?.projDataFinal"
                       formControlName="data_final" required
                       readonly="true" (focus)="picker2.open()" (click)="picker2.open()"
                       (dateChange)="validaPrazo($event)">
                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2></mat-datepicker>
                <mat-error *ngIf="this.atividadeForm.get('data_final').hasError('required')">Informe o prazo
                </mat-error>
              </mat-input-container>
            </td>
          </tr>
        </table>

      </form>

      <div class="flex-end">
        <button class="action-buttons" mat-raised-button (click)="salvarAtividade(atividadeForm.value)" type="submit"
                [disabled]="atividadeForm.invalid">
          <span class="action-buttons">ADICIONAR</span>
        </button>
        <div class="fill-remaining-space"></div>
        <button mat-raised-button button (click)="cancelar()">
          <span class="action-buttons">CANCELAR</span>
        </button>

      </div>
    </mat-card-content>

  </mat-card>
</div>
